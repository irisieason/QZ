# å¿«é€Ÿå‘å¸ƒæŒ‡å—

## ğŸ¯ å‘å¸ƒæç¤ºè¯­ï¼ˆå”¯ä¸€éœ€è¦è®°ä½çš„ï¼‰

å½“ä½ æƒ³å‘å¸ƒåŒ…æ—¶ï¼Œå¯¹ AI è¯´ï¼š

```
å‘å¸ƒåŒ…åˆ° GitHub Packagesï¼Œäº¤äº’å¼å¼•å¯¼æˆ‘æä¾›å†…å®¹
```

AI ä¼šè‡ªåŠ¨æ‰§è¡Œå®Œæ•´çš„äº¤äº’å¼å‘å¸ƒæµç¨‹ï¼

---

## ğŸ“¦ äº¤äº’å¼å‘å¸ƒæµç¨‹

### å®Œæ•´ç¤ºä¾‹å¯¹è¯

```
ä½ : å‘å¸ƒåŒ…åˆ° GitHub Packagesï¼Œäº¤äº’å¼å¼•å¯¼æˆ‘æä¾›å†…å®¹

AI: ğŸ“¦ å¼€å§‹å‘å¸ƒæµç¨‹...

å½“å‰ç‰ˆæœ¬: 1.0.9

è¯·é€‰æ‹©è¦å‘å¸ƒçš„ç‰ˆæœ¬ç±»å‹ï¼š
A. patch (1.0.9 â†’ 1.0.10) - ä¿®å¤ bug
B. minor (1.0.9 â†’ 1.1.0) - æ–°åŠŸèƒ½
C. major (1.0.9 â†’ 2.0.0) - ç ´åæ€§æ›´æ–°
D. custom - è‡ªå®šä¹‰ç‰ˆæœ¬å·

ä½ : A

AI: âœ… ç‰ˆæœ¬å·å·²æ›´æ–°ä¸º 1.0.10

å³å°†å‘å¸ƒç‰ˆæœ¬: 1.0.10
åŒ…å: @irisieason/qz-react
Registry: https://npm.pkg.github.com

æ˜¯å¦ç»§ç»­å‘å¸ƒï¼Ÿ
A. ç¡®è®¤å‘å¸ƒ
B. å–æ¶ˆ

ä½ : A

AI: ğŸš€ æ­£åœ¨å‘å¸ƒ...
[æ‰§è¡Œ npm run release]

âœ… å‘å¸ƒæˆåŠŸï¼
ç‰ˆæœ¬: 1.0.10
æŸ¥çœ‹: https://github.com/irisieason/QZ/packages
```

---

## ğŸ”§ ç‰ˆæœ¬ç±»å‹è¯´æ˜

### Patch (1.0.9 â†’ 1.0.10)
- ä¿®å¤ bug
- å°çš„æ”¹è¿›
- ä¸å½±å“ API
- **æœ€å¸¸ç”¨**

### Minor (1.0.9 â†’ 1.1.0)
- æ–°åŠŸèƒ½
- å‘åå…¼å®¹
- ä¸ç ´åç°æœ‰ä»£ç 

### Major (1.0.9 â†’ 2.0.0)
- ç ´åæ€§æ›´æ”¹
- API å˜æ›´
- éœ€è¦ç”¨æˆ·æ›´æ–°ä»£ç 

### Custom
- æ‰‹åŠ¨æŒ‡å®šç‰ˆæœ¬å·
- ç”¨äºç‰¹æ®Šæƒ…å†µ

---

## ğŸ” é…ç½®è¯´æ˜

### å½“å‰é…ç½®çŠ¶æ€

âœ… **å·²é…ç½®é¡¹ï¼š**
- GitHub Token: å·²è®¾ç½®ï¼ˆå­˜å‚¨åœ¨ `.env` æ–‡ä»¶ï¼‰
- åŒ…å: `@irisieason/qz-react`
- Registry: `https://npm.pkg.github.com`
- ä»“åº“: `https://github.com/irisieason/QZ.git`
- å½“å‰ç‰ˆæœ¬: `1.0.9`

### é…ç½®æ–‡ä»¶ä½ç½®

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ .env                 # GitHub Tokenï¼ˆä¸æäº¤åˆ° Gitï¼‰
â”œâ”€â”€ .npmrc              # Registry é…ç½®ï¼ˆä¸æäº¤åˆ° Gitï¼‰
â””â”€â”€ package.json        # åŒ…é…ç½®
```

### .env æ–‡ä»¶å†…å®¹

```bash
NODE_AUTH_TOKEN=ghp_ä½ çš„å®é™…token
```

### .npmrc æ–‡ä»¶å†…å®¹

```properties
@irisieason:registry=https://npm.pkg.github.com
//npm.pkg.github.com/:_authToken=${NODE_AUTH_TOKEN}
```

---

## ğŸš€ æ ¸å¿ƒè„šæœ¬

### package.json é…ç½®

```json
{
  "scripts": {
    "prepublishOnly": "npm run build",
    "release": "npx dotenv-cli npm publish"
  }
}
```

**å·¥ä½œåŸç†ï¼š**
1. `npm run release` æ‰§è¡Œ
2. `dotenv-cli` è¯»å– `.env` æ–‡ä»¶
3. åŠ è½½ `NODE_AUTH_TOKEN` åˆ°ç¯å¢ƒå˜é‡
4. è§¦å‘ `prepublishOnly` â†’ è¿è¡Œ `npm run build`
5. æ‰§è¡Œ `npm publish` å‘å¸ƒåˆ° GitHub Packages

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### âœ… æ­£ç¡®åšæ³•

1. **ä½¿ç”¨äº¤äº’å¼æµç¨‹**ï¼ˆå¼ºçƒˆæ¨èï¼‰
   ```
   å‘å¸ƒåŒ…åˆ° GitHub Packagesï¼Œäº¤äº’å¼å¼•å¯¼æˆ‘æä¾›å†…å®¹
   ```

2. **ä½¿ç”¨ npm run release**
   ```bash
   npm run release  # è‡ªåŠ¨åŠ è½½ .env ä¸­çš„ token
   ```

3. **åªå‘å¸ƒä¸€æ¬¡**
   - å¦‚æœå‡ºç° 409 é”™è¯¯ï¼Œè¯´æ˜å·²ç»å‘å¸ƒæˆåŠŸ
   - ä¸è¦é‡å¤æ‰§è¡Œ

### âŒ é”™è¯¯åšæ³•

1. **ç›´æ¥ä½¿ç”¨ npm publish**
   ```bash
   npm publish  # âŒ é”™è¯¯ï¼npm ä¸ä¼šè‡ªåŠ¨è¯»å– .env
   ```

2. **åœ¨é…ç½®æ–‡ä»¶ä¸­å†™ token**
   ```properties
   # âŒ é”™è¯¯ï¼ä¼šæ³„éœ² token
   //npm.pkg.github.com/:_authToken=ghp_xxxxx
   ```

3. **é‡å¤å‘å¸ƒ**
   ```bash
   npm run release
   npm run release  # âŒ é”™è¯¯ï¼ä¼šå¯¼è‡´ 409 å†²çª
   ```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: è®¤è¯å¤±è´¥ï¼ˆ401 Unauthorizedï¼‰

**åŸå› ï¼š** npm æ²¡æœ‰è¯»å–åˆ° `.env` æ–‡ä»¶ä¸­çš„ token

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# å¿…é¡»ä½¿ç”¨ dotenv-cli åŠ è½½ç¯å¢ƒå˜é‡
npm run release
```

### é—®é¢˜ 2: åŒ…å·²å­˜åœ¨ï¼ˆ409 Conflictï¼‰

**åŸå› ï¼š** è¯¥ç‰ˆæœ¬å·²ç»å‘å¸ƒæˆåŠŸ

**è§£å†³æ–¹æ¡ˆï¼š**
- ä¸éœ€è¦é‡å¤å‘å¸ƒ
- å¦‚æœéœ€è¦å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œå…ˆæ›´æ–°ç‰ˆæœ¬å·

### é—®é¢˜ 3: æƒé™ä¸è¶³ï¼ˆ403 Forbiddenï¼‰

**åŸå› ï¼š** Token æƒé™ä¸è¶³æˆ–å·²è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆï¼š**
1. è®¿é—® https://github.com/settings/tokens
2. æ£€æŸ¥ token æ˜¯å¦æœ‰ `write:packages` æƒé™
3. å¦‚æœè¿‡æœŸï¼Œé‡æ–°ç”Ÿæˆå¹¶æ›´æ–° `.env` æ–‡ä»¶

---

## ğŸ“Š æŸ¥çœ‹å·²å‘å¸ƒçš„åŒ…

è®¿é—®ï¼šhttps://github.com/irisieason/QZ/packages

---

## ğŸ’¡ æ‰‹åŠ¨å‘å¸ƒï¼ˆå¦‚æœéœ€è¦ï¼‰

å¦‚æœä½ æƒ³æ‰‹åŠ¨æ‰§è¡Œå‘å¸ƒï¼ˆä¸æ¨èï¼‰ï¼š

```bash
# 1. æ›´æ–°ç‰ˆæœ¬å·
npm version patch  # æˆ– minor / major

# 2. å‘å¸ƒï¼ˆå¿…é¡»ä½¿ç”¨ dotenv-cliï¼‰
npm run release

# 3. æ¨é€åˆ° GitHub
git push --follow-tags
```

---

## âœ¨ è®°ä½è¿™ä¸€å¥è¯

```
å‘å¸ƒåŒ…åˆ° GitHub Packagesï¼Œäº¤äº’å¼å¼•å¯¼æˆ‘æä¾›å†…å®¹
```

è¿™æ˜¯ä½ å”¯ä¸€éœ€è¦è®°ä½çš„æç¤ºè¯ï¼AI ä¼šå¤„ç†æ‰€æœ‰ç»†èŠ‚ã€‚
