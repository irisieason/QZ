#!/usr/bin/env node

/**
 * Generate icon list from ix-icons package
 * This script reads the icons type definition and generates a list of icon names
 */

const fs = require('fs');
const path = require('path');

const iconsTypePath = path.join(__dirname, '../node_modules/@irisieason/ix-icons/icons/index.d.ts');
const outputPath = path.join(__dirname, '../src/components/Button/icon-list.ts');

// Read the type definition file
const content = fs.readFileSync(iconsTypePath, 'utf-8');

// Extract icon names
const iconNames = [];
const regex = /export declare var (icon[A-Za-z0-9]+):/g;
let match;

while ((match = regex.exec(content)) !== null) {
  const iconName = match[1];
  // Convert iconCamelCase to kebab-case
  const kebabName = iconName
    .replace(/^icon/, '')  // Remove icon prefix
    .replace(/([A-Z])/g, '-$1')  // Add - before capital letters
    .toLowerCase()  // Convert to lowercase
    .replace(/^-/, '');  // Remove leading -
  
  iconNames.push(kebabName);
}

// Sort alphabetically
iconNames.sort();

// Generate TypeScript file
const tsContent = `/*
 * SPDX-FileCopyrightText: 2025 Siemens AG
 *
 * SPDX-License-Identifier: MIT
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * Complete list of available icons from @irisieason/ix-icons
 * 
 * This file is auto-generated by scripts/generate-icon-list.js
 * Do NOT edit manually - run 'pnpm run generate-icon-list' to regenerate
 */

export const availableIcons = [
${iconNames.map(name => `  '${name}',`).join('\n')}
] as const;

export type IconName = typeof availableIcons[number];
`;

// Write the file
fs.writeFileSync(outputPath, tsContent, 'utf-8');

console.log(`‚úÖ Generated ${iconNames.length} icon names`);
console.log(`üìù Output: ${outputPath}`);
console.log(`\nFirst 10 icons: ${iconNames.slice(0, 10).join(', ')}`);
console.log(`Last 10 icons: ${iconNames.slice(-10).join(', ')}`);
